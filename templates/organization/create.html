
{% extends "base.html" %}

{% block title %}Organization.supply - Create{% endblock title %}

{% block content %}
<h1 class="mt-3 text-center">
    Set up your organization
</h1>

<h4 class="subtitle mt-3 text-center">
    Your first steps with your inventory        
</h4>

<div class="row justify-content-center">
    <div class="col-md-4">
        <form class="measure center" action="" method="POST">
            {% csrf_token %}
            <label class="col-form-label" for="name">Organization name *</label>
            {{ create_organization_form.name }}
            <p class="form-text">
                This will be the name of your organization.
                Your URL will be: https://organization.supply/<span id="slug"></span>
            </p>
            <label class="col-form-label" for="contact_email">Contact email *</label>
            {{ create_organization_form.contact_email }}
            <p class="form-text">
                Your primary contact email, which we might be in need of if 
                we want to contact you.
            </p>
        
            <div class="d-grid gap-2">
                <input class="btn btn-primary" type="submit" value="Next step &raquo;">
            </div>

            <p class="form-text">
                    By creating an organization, you agree to the 
                    <a class="text-decoration-none" href="{% url 'terms' %}">
                        Terms of Service
                    </a> and 
                    <a class="text-decoration-none" href="{% url 'privacy' %}">Privacy Policy</a>. We'll occasionally send you account-related emails.
            </p>
        </form>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>
    $(document).ready(function() {
        $("input#id_name").keyup(function(){
            $('#slug').html(slugify(this.value))
        })
    });

    function slugify(str) {
        str = str.replace(/^\s+|\s+$/g, ''); // trim
        str = str.toLowerCase();
    
        // remove accents, swap ñ for n, etc
        var from = "àáäâèéëêìíïîòóöôùúüûñç·/_,:;";
        var to   = "aaaaeeeeiiiioooouuuunc------";
        for (var i=0, l=from.length ; i<l ; i++) {
            str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i));
        }

        str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars
            .replace(/\s+/g, '-') // collapse whitespace and replace by -
            .replace(/-+/g, '-'); // collapse dashes
        return str;
    }

</script>
{% endblock %}