
{% extends "base.html" %}

{% block title %}{{ global_preferences.title }} - Products{% endblock title %}

{% block content %}

<h1 class="ph3 db">
    ðŸ“¦ Products
    <a class="f6 link dim ba ph3 pv2 mb2 dib black fr" href="{% url 'product_new' %}">Add a product</a>
</h1>

<div class="mh3 overflow-auto">
    <table class="f6 w-100 center" cellspacing="0">
        <thead>
            <tr>
                <th class="fw6 bb b--black-20 tl pb3 pr3 bg-white">Name</th>
                <th class="fw6 bb b--black-20 tl pb3 pr3 bg-white">Description</th>
                <th class="fw6 bb b--black-20 tl pb3 pr3 bg-white">Total inventory</th>
                <th class="fw6 bb b--black-20 tl pb3 pr3 bg-white">Shortcuts</th>
                <th class="fw6 bb b--black-20 tl pb3 pr3 bg-white" width="400px">Actions</th>
            </tr>
        </thead>
        <tbody class="lh-copy">
            {% if products %}
            {% for product in products %}
                <tr>
                    <td class="pt2 pr3 bb b--black-20">
                        <a href="{% url 'product_view' product.id %}">{{ product.name }}</a>
                        
                    </td>
                    <td class="pt2 pr3 bb b--black-20">
                        {{ product.desc }}
                    </td>
                    <td class="pt2 pr3 bb b--black-20">
                        {% if product.inventory_total %}
                            {{ product.inventory_total }}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td class="pt2 pr3 bb b--black-20">
                        {% if product.inventory_total %}
                            <a class="f6 link dim ba ph3 pv2 mb2 dib black" href="{% url 'shortcut_move' %}?product={{product.id}}">
                                Move
                            </a>
                            <a class="f6 link dim ba ph3 pv2 mb2 dib black" href="{% url 'shortcut_sales' %}?product={{product.id}}">
                                Sale
                            </a>
                        {% endif %}
                    </td>
                    <td class="pt2 pr3 bb b--black-20">
                        <a class="f6 link dim ba ph3 pv2 mb2 dib black" href="{% url 'product_view' product.id %}">
                            Details
                        </a>
                        <a class="f6 link dim ba ph3 pv2 mb2 dib black" href="{% url 'product_edit' product.id %}">
                            Edit
                        </a>
                        <!-- Django doesn't support DELETE requests -->
                        <form method="POST" action="{% url 'product_edit' product.id %}" class="dib">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="delete">
                            <input type="submit" value="Delete" class="ba hover-bg-red b--black lh-copy f6 link bg-transparent ph3 pv2 mb2 pointer dib black input-reset">
                        </form>
                    </td>
                </tr>
            {% endfor %}
            {% else %}
                <tr>
                    <td class="pt2 pr3 bb b--black-20" colspan="5">
                        <p>No products found. Want to <a href="{% url 'product_new' %}">add a product</a>?</p>
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>

{% endblock %}