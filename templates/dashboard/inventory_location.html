{% extends "base.html" %}

{% block title %}Inventory - Inventory{% endblock title %}

{% block content %}

<h1 class="ph3 db">
    ðŸ“‹ Inventory 
    <small class="gray">
        (per location / <a href="{% url 'inventory_product' %}">per product</a>)
    </small>
</h1>

<div class="mh3 overflow-auto">
    <table class="f6 w-100 center" cellspacing="0">
        <thead>
                <tr>
                <th class="fw6 bb b--black-20 tl pb3 pr3 bg-white">Location</th>
                <th class="fw6 bb b--black-20 tl pb3 pr3 bg-white">Inventory</th>
            </tr>
        </thead>
        <tbody class="lh-copy">
            {% regroup inventories|dictsort:"location.name" by location as location_inventory %}
        
            {% if location_inventory %}
            {% for inventory in location_inventory %}
            <tr>
                <td class="pv3 bb b--black-20">
                    <a href="{% url 'location_view' inventory.grouper.id %}">
                        {{ inventory.grouper.name }}
                    </a>
                </td>   
                <td class="pv3 bb b--black-20">
                    <ul>
                    {% for inventory in inventory.list %}
                        <li>
                            {{ inventory.amount }}
                            <a href="{% url 'product_view' inventory.product.id %}">{{ inventory.product.name }}</a>
                        </li>
                    {% endfor %}
                    </ul>
                </td>
            </tr>
            {% endfor %}
            {% else %}
                <tr>
                    <td class="pt2 pr3 bb b--black-20" colspan="5">
                            <p>No inventory found. Inventory requires a <a href="{% url 'product_new' %}">product</a> or <a href="{% url 'location_new' %}">location</a>.</p>
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}