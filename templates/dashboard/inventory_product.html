{% extends "base.html" %}

{% block title %}Inventory - Inventory{% endblock title %}

{% block content %}

<h1 class="ph3 db">ðŸ“‹ Inventory <small class="gray">(<a href="{% url 'inventory_location' %}">per location</a> / per product)</small></h1>

<div class="mh3 overflow-auto">
    <table class="f6 w-100 center" cellspacing="0">
        <thead>
                <tr>
                <th class="fw6 bb b--black-20 tl pb3 pr3 bg-white">Product</th>
                <th class="fw6 bb b--black-20 tl pb3 pr3 bg-white">Inventory</th>
            </tr>
        </thead>
        <tbody class="lh-copy">
            {% regroup inventories|dictsort:"product.name" by product as product_inventory %}
        
            {% if product_inventory %}
            {% for inventory in product_inventory %}
            <tr>
                <td class="pv3 bb b--black-20">
                    <a href="{% url 'product_view' inventory.grouper.id %}">
                        {{ inventory.grouper.name }}
                    </a>
                </td>   
                <td class="pv3 bb b--black-20">
                    <ul>
                    {% for inventory in inventory.list %}
                        <li>
                            {{ inventory.amount }} at
                            <a href="{% url 'location_view' inventory.location.id %}">{{ inventory.location.name }}</a>
                        </li>
                    {% endfor %}
                    </ul>
                </td>
            </tr>
            {% endfor %}
            {% else %}
                <tr>
                    <td class="pt2 pr3 bb b--black-20" colspan="5">
                        <p>No inventory found. Inventory requires a <a href="{% url 'product_new' %}">product</a> or <a href="{% url 'location_new' %}">location</a>.</p>
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}