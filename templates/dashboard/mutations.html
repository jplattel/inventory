{% extends "base.html" %}

{% block title %}Inventory - Transactions{% endblock title %}

{% block content %}

<h1>ðŸ§® Transactions</h1>

<div class="overflow-auto">
    <table class="f6 w-100 center" cellspacing="0">
        <thead>
            <tr>
                <th class="fw6 bb b--black-20 tl pt3 pr3 pb3 bg-white">Date</th>
                <th class="fw6 bb b--black-20 tl pa3 bg-white">Amount</th>
                <th class="fw6 bb b--black-20 tl pa3 bg-white">Product</th>
                <th class="fw6 bb b--black-20 tl pa3 bg-white">Location</th>
                <th class="fw6 bb b--black-20 tl pa3 bg-white" colspan="2">Description</th>
            </tr>
        </thead>
        <tbody class="lh-copy">
            <tr>
                <form method="POST" id="mutation_form" action="{% url 'mutation_insert' %}">
                    <td class="pt3 pr3 pb3 bb b--black-20">
                        {% now "Y-m-d" %}
                        {% csrf_token %}
                    </td>
                    <td class="pa3 bb b--black-20">
                        {{ form.operation }}
                        {{ form.amount }}
                    </df>
                    <td class="pa3 bb b--black-20">
                        {{ form.product }}
                    </td>
                    <td class="pa3 bb b--black-20">
                        {{ form.location }}
                    </td>
                    <td class="pa3 bb b--black-20">
                        {{ form.desc }}
                    </td>
                    <td class="pa3 bb b--black-20">
                            <input class="b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib" type="submit" value="Save Transaction">
                    </td>
                </form>
            </tr>

            {% for mutation in mutations %}
                <tr>
                    <td class="pt3 pr3 pb3 bb b--black-20">
                        {{ mutation.created|date:"Y-m-d h:i:s" }}
                    </td>
                    <td class="pa3 bb b--black-20">
                        {% if mutation.operation == 'remove' %}
                            -{{ mutation.amount }}
                        {% else %}
                            +{{ mutation.amount }}
                        {% endif %}
                    </td>
                    <td class="pa3 bb b--black-20">
                        <a href="{% url 'product_view' mutation.product.id %}">{{ mutation.product.name }}</a>
                    </td>
                    <td class="pa3 bb b--black-20">
                        <a href="{% url 'location_view' mutation.location.id %}">{{ mutation.location.name }}</a>
                    </td>
                    <td class="pa3 bb b--black-20" colspan="2">
                        {{ mutation.desc }}
                    </td>      
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>
#mutation_form select {
    border: 1px solid grey;
    padding: 3px;
    background-color: white;
}

#id_amount{
    border: 1px solid grey;
    height: 26px;
}
#id_desc{
    border: 1px solid grey;
    height: 26px;
    resize: none;
    font-family: inherit;
    font-size: 100%;
    line-height: 1.15;
    margin: 0;
}
</style>
{% endblock %}